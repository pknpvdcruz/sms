'use strict';

/**
 * @file test script for src/LazadaRequest/signature
 */
var signature = require('../LazadaRequest/signature');

var keysort = signature.keysort,
    concatDictionaryKeyValue = signature.concatDictionaryKeyValue,
    signRequest = signature.signRequest;


describe('test signature', function () {
  test('test keysort', function () {
    var unsort = {
      foo: 1,
      bar: 2,
      foo_bar: 3,
      foobar: 4
    };
    var sort = {
      bar: 2,
      foo: 1,
      foo_bar: 3,
      foobar: 4
    };
    expect(keysort(unsort)).toEqual(sort);
  });
  test('test concatDictionaryKeyValue', function () {
    var sort = {
      bar: 2,
      foo: 1,
      foo_bar: 3,
      foobar: 4
    };
    var expected = 'bar2foo1foo_bar3foobar4';
    expect(concatDictionaryKeyValue(sort)).toEqual(expected);
  });
  test('test signRequest', function () {
    var secret = '1234';
    var api = '/test/api';
    var params = {
      foo: 1,
      bar: 2,
      foo_bar: 3,
      foobar: 4
    };
    var hex = signRequest(secret, api, params);
    expect(hex).toMatchSnapshot();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9fX3Rlc3RzX18vc2lnbmF0dXJlLnRlc3QuanMiXSwibmFtZXMiOlsic2lnbmF0dXJlIiwicmVxdWlyZSIsImtleXNvcnQiLCJjb25jYXREaWN0aW9uYXJ5S2V5VmFsdWUiLCJzaWduUmVxdWVzdCIsImRlc2NyaWJlIiwidGVzdCIsInVuc29ydCIsImZvbyIsImJhciIsImZvb19iYXIiLCJmb29iYXIiLCJzb3J0IiwiZXhwZWN0IiwidG9FcXVhbCIsImV4cGVjdGVkIiwic2VjcmV0IiwiYXBpIiwicGFyYW1zIiwiaGV4IiwidG9NYXRjaFNuYXBzaG90Il0sIm1hcHBpbmdzIjoiOztBQUFBOzs7QUFHQSxJQUFNQSxZQUFZQyxxQ0FBbEI7O0lBRVFDLE8sR0FBbURGLFMsQ0FBbkRFLE87SUFBU0Msd0IsR0FBMENILFMsQ0FBMUNHLHdCO0lBQTBCQyxXLEdBQWdCSixTLENBQWhCSSxXOzs7QUFFM0NDLFNBQVMsZ0JBQVQsRUFBMkIsWUFBTTtBQUMvQkMsT0FBSyxjQUFMLEVBQXFCLFlBQU07QUFDekIsUUFBTUMsU0FBUztBQUNiQyxXQUFLLENBRFE7QUFFYkMsV0FBSyxDQUZRO0FBR2JDLGVBQVMsQ0FISTtBQUliQyxjQUFRO0FBSkssS0FBZjtBQU1BLFFBQU1DLE9BQU87QUFDWEgsV0FBSyxDQURNO0FBRVhELFdBQUssQ0FGTTtBQUdYRSxlQUFTLENBSEU7QUFJWEMsY0FBUTtBQUpHLEtBQWI7QUFNQUUsV0FBT1gsUUFBUUssTUFBUixDQUFQLEVBQXdCTyxPQUF4QixDQUFnQ0YsSUFBaEM7QUFDRCxHQWREO0FBZUFOLE9BQUssK0JBQUwsRUFBc0MsWUFBTTtBQUMxQyxRQUFNTSxPQUFPO0FBQ1hILFdBQUssQ0FETTtBQUVYRCxXQUFLLENBRk07QUFHWEUsZUFBUyxDQUhFO0FBSVhDLGNBQVE7QUFKRyxLQUFiO0FBTUEsUUFBTUksV0FBVyx5QkFBakI7QUFDQUYsV0FBT1YseUJBQXlCUyxJQUF6QixDQUFQLEVBQXVDRSxPQUF2QyxDQUErQ0MsUUFBL0M7QUFDRCxHQVREO0FBVUFULE9BQUssa0JBQUwsRUFBeUIsWUFBTTtBQUM3QixRQUFNVSxTQUFTLE1BQWY7QUFDQSxRQUFNQyxNQUFNLFdBQVo7QUFDQSxRQUFNQyxTQUFTO0FBQ2JWLFdBQUssQ0FEUTtBQUViQyxXQUFLLENBRlE7QUFHYkMsZUFBUyxDQUhJO0FBSWJDLGNBQVE7QUFKSyxLQUFmO0FBTUEsUUFBTVEsTUFBTWYsWUFBWVksTUFBWixFQUFvQkMsR0FBcEIsRUFBeUJDLE1BQXpCLENBQVo7QUFDQUwsV0FBT00sR0FBUCxFQUFZQyxlQUFaO0FBQ0QsR0FYRDtBQVlELENBdENEIiwiZmlsZSI6InNpZ25hdHVyZS50ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSB0ZXN0IHNjcmlwdCBmb3Igc3JjL0xhemFkYVJlcXVlc3Qvc2lnbmF0dXJlXG4gKi9cbmNvbnN0IHNpZ25hdHVyZSA9IHJlcXVpcmUoJ3NyYy9MYXphZGFSZXF1ZXN0L3NpZ25hdHVyZScpXG5cbmNvbnN0IHsga2V5c29ydCwgY29uY2F0RGljdGlvbmFyeUtleVZhbHVlLCBzaWduUmVxdWVzdCB9ID0gc2lnbmF0dXJlXG5cbmRlc2NyaWJlKCd0ZXN0IHNpZ25hdHVyZScsICgpID0+IHtcbiAgdGVzdCgndGVzdCBrZXlzb3J0JywgKCkgPT4ge1xuICAgIGNvbnN0IHVuc29ydCA9IHtcbiAgICAgIGZvbzogMSxcbiAgICAgIGJhcjogMixcbiAgICAgIGZvb19iYXI6IDMsXG4gICAgICBmb29iYXI6IDQsXG4gICAgfVxuICAgIGNvbnN0IHNvcnQgPSB7XG4gICAgICBiYXI6IDIsXG4gICAgICBmb286IDEsXG4gICAgICBmb29fYmFyOiAzLFxuICAgICAgZm9vYmFyOiA0LFxuICAgIH1cbiAgICBleHBlY3Qoa2V5c29ydCh1bnNvcnQpKS50b0VxdWFsKHNvcnQpXG4gIH0pXG4gIHRlc3QoJ3Rlc3QgY29uY2F0RGljdGlvbmFyeUtleVZhbHVlJywgKCkgPT4ge1xuICAgIGNvbnN0IHNvcnQgPSB7XG4gICAgICBiYXI6IDIsXG4gICAgICBmb286IDEsXG4gICAgICBmb29fYmFyOiAzLFxuICAgICAgZm9vYmFyOiA0LFxuICAgIH1cbiAgICBjb25zdCBleHBlY3RlZCA9ICdiYXIyZm9vMWZvb19iYXIzZm9vYmFyNCdcbiAgICBleHBlY3QoY29uY2F0RGljdGlvbmFyeUtleVZhbHVlKHNvcnQpKS50b0VxdWFsKGV4cGVjdGVkKVxuICB9KVxuICB0ZXN0KCd0ZXN0IHNpZ25SZXF1ZXN0JywgKCkgPT4ge1xuICAgIGNvbnN0IHNlY3JldCA9ICcxMjM0J1xuICAgIGNvbnN0IGFwaSA9ICcvdGVzdC9hcGknXG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgZm9vOiAxLFxuICAgICAgYmFyOiAyLFxuICAgICAgZm9vX2JhcjogMyxcbiAgICAgIGZvb2JhcjogNCxcbiAgICB9XG4gICAgY29uc3QgaGV4ID0gc2lnblJlcXVlc3Qoc2VjcmV0LCBhcGksIHBhcmFtcylcbiAgICBleHBlY3QoaGV4KS50b01hdGNoU25hcHNob3QoKVxuICB9KVxufSlcbiJdfQ==